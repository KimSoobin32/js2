<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-compatible" content="ie=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>javascript 7일차 상품리스트 출력 응용</title>
<script src="http://192.168.100.77:8080/js/product_list.js"></script>
</head>
<body>
<!--  action="./testt.html" -->
<form name="frm" id="frm" method="get" action="./testt.html">
<table border="1" cellpadding="0" cellspacing="0">
<thead>
	<tr>
		<th><input type="checkbox" id="all" onclick="allcheck()"></th>
		<th>상품명</th>
		<th>가격</th>
	</tr>
</thead>

<tbody id="tbody">
	
</tbody>
</table>
<input type="submit" value="구매하기">
</form>
<!-- 
<tr>	//4
	<td><input type="checkbox"></td>
	<td>셔링</td>
	<td>360,000</td>
</tr>
 -->
 
</body>
<script>

console.log(product);
console.log(product.pd_name.length);	//4 상품개수
console.log(product.pd_name[0].length);	//3 key 이름 가격 번호

var tbody = document.getElementById("tbody");
var tr,td,cb;

product.pd_name.forEach(function(aa,bb,cc) {
	//console.log(bb);
	tr = document.createElement("tr");
	product.pd_name[bb].forEach(function(a1,a2,a3) {
		//console.log(a3[1]);
		td = document.createElement("td");
		
		switch(a2){
		case 0:
			cb = document.createElement("input");
			cb.type = "checkbox";
			cb.value = a3[2];
			cb.name = "ct";
			td.append(cb);
			break;
		case 1:
			td.append(a3[0]);		
			break;
		case 2:
			td.append(Number(a3[1]).toLocaleString());		
			break;
		}

		tr.append(td);
	});
	
	tbody.append(tr);
});


function allcheck() {
	var me = document.getElementById("all");
	console.log(me.checked);
	var useck;
	me.checked ==true?(useck=true):(useck=false);
	
	var w=0;
	while(w<product.pd_name.length){
		frm.ct[w].checked = useck;
		w++;
	}
}


</script>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-compatible" content="ie=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>javascript 7일차 상품리스트 출력 및 체크박스 응용(user3)</title>
<script src="http://192.168.100.77:8080/js/product_list.js"></script>
</head>
<body>
<form name="f" id="f" method="get" action="./testt.html">
<table border="1" cellpadding="0" cellspacing="0">
<thead>
	<tr>
		<th><input type="checkbox" id="allcheck2" onclick="allcheck2()"></th>
		<th>상품명</th>
		<th>가격</th>
	</tr>
</thead>
<tbody id="list">
<!-- 
	<tr>
		<td><input type="checkbox" name="a"></td>
		<td>셔링</td>
		<td>360,000</td>
	</tr>
-->
</tbody>
</table>
<input type="button" value="구매하기" onclick="method2()">
</form>
</body>
<script>

var html= document.getElementById("list");
var ea = product["pd_name"].length;	//전체 체크 시 사용하기 위함
var tr,td,input;
console.log(product);
//console.log(product["pd_name"][2][1]);

Object.keys(product["pd_name"]).forEach(function(aa,bb,cc) {
	//console.log(aa);
	tr = document.createElement("tr");
	
	var f;
	for(f in product["pd_name"][aa]){
		//console.log(f);
		td = document.createElement("td");
		
		
		var code;
		switch(f){
		case "0":	//상품명
			code=2;
			input = document.createElement("input");
			input.type="checkbox";
			input.name="pd";
			input.value=product["pd_name"][aa][code];
			td.append(input)
			break;
		case "1":	//가격
			code=0;
			td.append(product["pd_name"][aa][code]);
			break;
		case "2":	//고유값
			code=1;
			td.append(Number(product["pd_name"][aa][code]).toLocaleString());
			break;
		}
		
		tr.append(td);
		html.append(tr);
		//console.log(product["pd_name"][aa][code]);
		
	}
});

function allcheck2() {
	alert("dd");
	if(f.allcheck2.checked==true){
		var w=0;
		while(w<ea){
			f.pd[w].checked=true;
			w++;
		}
	}else{
		var w=0;
		while(w<ea){
			f.pd[w].checked=false;
			w++;
		}
	}
	
}

function method2() {
	//하나라도 체크가 되어야만 전송이 됨(응용)
	f.submit();
}


</script>
</html>